---
title: Customising my Hugo Theme
date: 2023-01-30T21:45:00
lastmod: 2023-09-11T7:41:00
images: 
- https://raw.githubusercontent.com/skyth3r/skyth3r.github.io/master/assets/article-images/customising-hugo-website-header.png
description: Modifications I've made to my Digital Garden Hugo theme.
tags: ['web-dev', 'hugo']
---

My Hugo website uses the [Digital Garden Hugo theme](https://github.com/apvarun/digital-garden-hugo-theme) but I've made a few changes in addition to using the theme. I've listed these changes below both for myself to refer back to and for anyone else who might find these useful to include in their own Hugo website üëáüèΩ

## Updating lastmod text
One of the first changes I made was to [change the lastmod front matter text](https://github.com/Skyth3r/Skyth3r.github.io/commit/ee9926c786e458476524ac571be01a7ea6a38285) that was displayed on the theme. Previously it would default to showing `Pruned January 2, 2023` on articles with the `lastmod` front matter. After my change to the article single layout it now instead shows `Last tended to on January 2, 2023`.

```
{{ if .Date }}
    <p class="text-sm text-slate-500 !mb-8"> Planted {{ $date }}
		{{ if ne $lastmod $date}}
			<br/> Last tended to on {{ .Lastmod.Format "January 2, 2006" }}
        {{ end }}
	</p>
{{ end }}
```

## Google Analytics
Adding Google Analytics to the site is pretty simple as it's natively supported by the theme I'm using. Within the config.toml file, you just need to add the Google Analytics tracking ID in the format, "googleAnalytics = 'TRAKCING_CODE_HERE'".

One issue I noticed with this was the fact analytics data would be pinged back to Google Analytics while I worked on the website locally on my own machine.

To fix this, I [replaced the config.toml file stored in the root of the repository with a config folder](https://github.com/Skyth3r/Skyth3r.github.io/commit/1bcb816700f2244d7a8337f61be5b410886f88bd#diff-5f948a63b2e0f5e8409b3a709cb74c89451854c6ded2959a6f110d5340001cc1) and then split the config.toml file into two files, a default file that contains all the config settings for the site, and a production config.toml file that contains only the Google Analytics tracking code. 

Now when I work on new things for the website I run the command `hugo server --environment development -D`, which loads only the default config file. When re-building the website, I use the `hugo` command takes both config files and merges them together to build the production website, thus resolving the issue of generating accidental analytics data during testing and development.

## Additional Article Front Matter
I ended up adding a few new improvements to the article front matter.

### Article read time
[Added a read time for articles](https://github.com/Skyth3r/Skyth3r.github.io/commit/a3cea7373e46fd49c8ab0c0e1499497741153237). This is automatically generated and listed for each article item. This is based on the code found [here](https://discourse.gohugo.io/t/readingtime-define/13036/4).

```
{{ if gt .ReadingTime 1 }}
    {{ .Scratch.Set "readingTime" "minutes" }}
{{ else }}
    {{ .Scratch.Set "readingTime" "minute" }}
{{ end }}
Reading time: {{ .ReadingTime }} {{ .Scratch.Get "readingTime" }}
```

### Tags
I wanted to be able to navigate my site articles by tags, so I've [added tags to each article](https://github.com/Skyth3r/Skyth3r.github.io/commit/29ede00b08c2f0eabe217eee315ef9924498250d) and updated the autogenerated tags page (was previously blank) as well. The code from the tags page is currently just copied from the theme's [portfolio layout](https://github.com/apvarun/digital-garden-hugo-theme/tree/main/layouts/portfolio). It's not perfect but it works for now.

```
<br/> Tags:
{{ with .Param "tags" }}
    {{ range $index, $tag := (. | sort) }} 
        {{ with $.Site.GetPage (printf "/%s/%s" "tags" $tag) }}
            <a href="{{ .Permalink }}">#{{ $tag | urlize }}</a>
        {{ end }}
    {{ end }}
{{ end }}
```

## rel-me verification
Modified the social icons sidebar code to [include rel=me](ttps://github.com/Skyth3r/Skyth3r.github.io/commit/f7cf25f796ead76c1348da976cb980e899f1302a). Used for [verification on Mastodon](https://docs.joinmastodon.org/user/profile/#verification).

```
<li>
    <a class="px-2 py-1.5 rounded-md text-sm block text-slate-800 dark:text-slate-50 {{ if eq (.URL|absURL) $permalink }} bg-slate-800 text-white dark: {{ else }} hover:bg-slate-200 dark:hover:bg-slate-700 {{ end }}"
    href="{{ .URL }}" target="_blank" rel="noopener noreferrer me">
...
```

## 404 page copy
[Added some copy to the 404 page](https://github.com/Skyth3r/Skyth3r.github.io/commit/1dd845aa4b5894753755a2384eb4d1f784067337) as it was previously a blank page.

## Buy me a coffee widget
[Added a buy me a coffee widget](https://github.com/Skyth3r/Skyth3r.github.io/commit/698221f0451372bac9b85b90fcff1b9f92321597) to each article page by creating a new partial shortcode.
